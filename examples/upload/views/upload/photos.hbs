{{!< ../default}}

<div class="page-form-upload">
  <section class="container">
    <h1 class="title">上传多张图片</h1>
    <form action="/upload/photos" method="post" enctype="multipart/form-data" class="form">
      <input type="file" name="photos" multiple accept="image/*" required="true" class="input" id="fileInput" />
      <button class="btn">上传</button>
      <div class="error">{{ message }}</div>
    </form>
    <ul class="upload-list">
      {{#each photos}}
      <li class="upload-item">
        <span>{{ this.name }}</span>
        <a href="..{{ this.src }}" class="upload-preview" target="_blank">preview</a>
      </li>
      {{/each}}
    </ul>
  </section>
</div>

{{#contentFor 'pageScripts'}}
<script>
  window.onload = function () {
    document.querySelector('#fileInput').onchange = function () {
      document.querySelector('.error').innerHTML = '';
    };
  };
</script>
{{/contentFor}}
